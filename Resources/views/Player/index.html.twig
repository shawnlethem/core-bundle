{% extends 'base.html.twig' %}

{% trans_default_domain 'VideoGamesRecordsCoreBundle' %}

{% block body_id 'player_index' %}

{% block title %}{{ player.getPseudo() }}{% endblock %}

{% block aside %}
    ASIDE
{% endblock %}

{% block body %}
<h1>{{ player.getPseudo() }}</h1>

    <ul>
        <li> | COUPES | MEDAILLES </li>
        <li> RANG | {{ player.getRankCup()|localizednumber }} / {{ nbPlayer|localizednumber }} | {{ player.getRankMedal()|localizednumber }} / {{ nbPlayer|localizednumber }} </li>
        <li> Platine | {{ player.getGameRank0()|localizednumber }} | {{ player.getChartRank0()|localizednumber }} </li>
        <li> Or | {{ player.getGameRank1()|localizednumber }} | {{ player.getChartRank1()|localizednumber }} </li>
        <li> Argent | {{ player.getGameRank2()|localizednumber }}  | {{ player.getChartRank2()|localizednumber }} </li>
        <li> Bronze | {{ player.getGameRank3()|localizednumber }}  | {{ player.getChartRank3()|localizednumber }} </li>
    </ul>

    <ul>
        <li>| pointGame | pointChart | badge | proof</li>
        <li>rank |  {{ player.getRankPointGame()|localizednumber }} / {{ nbPlayer|localizednumber }}  | {{ player.getRankPointChart()|localizednumber }} / {{ nbPlayer|localizednumber }} | {{ player.getRankBadge()|localizednumber }} / {{ nbPlayer|localizednumber }} | {{ player.getRankProof()|localizednumber }} / {{ nbPlayer|localizednumber }} </li>
        <li>point | {{ player.getPointGame()|localizednumber }} | {{ player.getPointChart()|localizednumber }} | {{ player.getPointBadge()|localizednumber }} | {{ player.getNbChartProven()|localizednumber }}</li>
    </ul>

    <ul>
        <li>Pseudo : {{ player.getPseudo() }}</li>
        <li>nbGame : {{ player.getPlayerGame()|length|localizednumber }}</li>
        <li>nbPost : {{ player.getNbChart()|localizednumber }}</li>
        <li>nbProof : {{ player.getNbChartProven()|localizednumber }}</li>
    </ul>

    <ul>
        {% if lastChart %}
        <li>Dernier record post√© :</li> {{ lastChart.getChart().getGroup().getGame().getLibGame() }} - {{ lastChart.getChart().getGroup().getLibGroup() }} - {{ lastChart.getChart().getLibChart() }} - {{ lastChart.getCreatedAt()|date('Y-m-d H:i:s')  }}
        {% endif %}
    </ul>

    <h2>Game list</h2>
    GAME | MEDALS | RANKING | POINTS
    <ul>
    {% for playerGame in player.getPlayerGame() %}
        <li>{{ playerGame.getGame().getLibGame() }} |
            {% if playerGame.getChartRank0() > 0 %} {{ playerGame.getChartRank0()|localizednumber }} Platine {% endif %}
            {% if playerGame.getChartRank1() > 0 %} {{ playerGame.getChartRank1()|localizednumber }} Or {% endif %}
            {% if playerGame.getChartRank2() > 0 %} {{ playerGame.getChartRank2()|localizednumber }} Argent {% endif %}
            {% if playerGame.getChartRank3() > 0 %} {{ playerGame.getChartRank3()|localizednumber }} Bronze {% endif %} |

            {% if playerGame.getRankPointChart() == 1 %}or
            {% elseif playerGame.getRankPointChart() == 2 %}argent
            {% elseif playerGame.getRankPointChart() == 3 %}bronze
            {% else %}
                {{ playerGame.getRankPointChart()|localizednumber }}|
            {% endif %} |
            {{ playerGame.pointGame|localizednumber }} points</li>
    {% endfor %}
    </ul>

    <h2>Badges</h2>
        {{ render(controller(
            'VideoGamesRecordsCoreBundle:Badge:playerList',
            { 'idPlayer': player.idPlayer(), 'type': 'master' }
        )) }}
        {{ render(controller(
            'VideoGamesRecordsCoreBundle:Badge:playerList',
            { 'idPlayer': player.idPlayer(), 'type': 'chart' }
        )) }}
        {{ render(controller(
            'VideoGamesRecordsCoreBundle:Badge:playerList',
            { 'idPlayer': player.idPlayer(), 'type': 'proof' }
        )) }}
{% endblock %}
